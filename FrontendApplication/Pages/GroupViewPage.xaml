<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:FrontendApplication.Pages"
             x:Class="FrontendApplication.Pages.GroupViewPage"
             Title="Group View Page">

    <ScrollView>
        <VerticalStackLayout Padding="10" Spacing="20">

            <!-- Header -->
            <Label Text="My Home" 
                   FontSize="24" 
                   HorizontalOptions="Center" />

            <!-- Group Members Section -->
            <Label Text="All Roomies" 
                   FontSize="18" 
                   HorizontalOptions="Center" />

            <!-- FlexLayout for Group Members -->
            <FlexLayout Wrap="Wrap" 
                        JustifyContent="Center" 
                        AlignItems="Center"
                        BindableLayout.ItemsSource="{Binding Members}">
                <BindableLayout.ItemTemplate>
                    <DataTemplate>
                        <Button Text="{Binding Username}" 
                                BackgroundColor="Purple" 
                                TextColor="White" 
                                Margin="5"
                                FontSize="16"
                                Command="{Binding Source={RelativeSource AncestorType={x:Type local:GroupViewPage}}, Path=OnMemberButtonClicked}"
                                CommandParameter="{Binding .}" />
                    </DataTemplate>
                </BindableLayout.ItemTemplate>
            </FlexLayout>

            <!-- The Shame Table Section -->
            <Label Text="The Shame Table" 
                   FontSize="18" 
                   Padding="10,20,0,0" />

            <!-- FlexLayout for Shame Table -->
            <FlexLayout Wrap="Wrap" 
                        JustifyContent="Center" 
                        AlignItems="Center"
                        BindableLayout.ItemsSource="{Binding ShameTable}">
                <BindableLayout.ItemTemplate>
                    <DataTemplate>
                        <Frame BorderColor="Gray" 
                               Padding="10" 
                               Margin="5" 
                               CornerRadius="8"
                               HasShadow="True">
                            <VerticalStackLayout>
                                <Label Text="{Binding OwedByUserName}" 
                                       FontSize="16" 
                                       TextColor="Black" />
                                <Label Text="{Binding Amount, StringFormat='{0:C}'}" 
                                       FontSize="14" 
                                       TextColor="Red" />
                            </VerticalStackLayout>
                        </Frame>
                    </DataTemplate>
                </BindableLayout.ItemTemplate>
            </FlexLayout>

            <!-- Your Owns Section -->
            <Label Text="Your Owns" 
                   FontSize="18" 
                   Padding="10,20,0,0" />

            <!-- FlexLayout for Your Owns -->
            <FlexLayout Wrap="Wrap" 
                        JustifyContent="Center" 
                        AlignItems="Center"
                        BindableLayout.ItemsSource="{Binding YourOwnsTable}">
                <BindableLayout.ItemTemplate>
                    <DataTemplate>
                        <Frame BorderColor="Gray" 
                               Padding="10" 
                               Margin="5" 
                               CornerRadius="8"
                               HasShadow="True">
                            <VerticalStackLayout>
                                <Label Text="{Binding OwedToUserName}" 
                                       FontSize="16" 
                                       TextColor="Black" />
                                <Label Text="{Binding Amount, StringFormat='{0:C}'}" 
                                       FontSize="14" 
                                       TextColor="Green" />
                            </VerticalStackLayout>
                        </Frame>
                    </DataTemplate>
                </BindableLayout.ItemTemplate>
            </FlexLayout>

            <!-- Action Buttons -->
            <Button Text="View Transaction" 
                    BackgroundColor="Purple" 
                    TextColor="White" 
                    Margin="10"
                    Command="{Binding OnViewTransactionClicked}" />

            <Button Text="Add Expense" 
                    BackgroundColor="Purple" 
                    TextColor="White" 
                    Margin="10"
                    Command="{Binding OnAddExpenseClicked}" />

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>